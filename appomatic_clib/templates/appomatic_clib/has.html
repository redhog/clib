{% extends "appomatic_clib/base.html" %}
{% load qr_tags %}
{% block full-content %}
  {% if request.user.has.count %}
    <div class="panel panel-default">
      <table class="table">
        {% if request.user.profile.has_borrowed.count %}
          <tr><th colspan="2">Borrowed things</th><th>by</th><th>owned by</th></tr>
          {% for t in request.user.profile.has_borrowed.all %}
            <tr>
              <td><a href='{{t.get_absolute_url}}'>{{t.type.barcode_type}}:{{t.type.barcode_data}}</td>
              <td><a href='{{t.get_absolute_url}}'>{{t.type.name}}</td>
              <td><a href='{{t.get_absolute_url}}'>{{t.type.designer}}</a></td>
              <td><a href='{{t.owner.profile.get_absolute_url}}'>{{t.owner.username}}</a></td>
            </tr>
          {% endfor %}
        {% endif %}
        {% if request.user.profile.has_own.count %}
          <tr><th colspan="2">Own things held</th><th>by</th><th></th></tr>
          {% for t in request.user.profile.has_own.all %}
            <tr>
              <td><a href='{{t.get_absolute_url}}'>{{t.type.barcode_type}}:{{t.type.barcode_data}}</td>
              <td><a href='{{t.get_absolute_url}}'>{{t.type.name}}</td>
              <td><a href='{{t.get_absolute_url}}'>{{t.type.designer}}</a></td>
              <td></td>
            </tr>
          {% endfor %}
        {% endif %}
      </table>
    </div>
  {% else %}
    <div class="alert alert-success" role="alert">
      You haven't borrowed anything. Maybe you'd like to search for things to borrow:

      <form action="{% url 'appomatic_clib.views.search' %}" class="form form-inline" role="form">
        <div class="input-group">
          <input type="text" name="query" placeholder="Search" class="form-control">
          <span class="input-group-btn">
            <button class="btn btn-default" type="submit"><i class='glyphicon glyphicon-search'></i>&nbsp;</button>
          </span>
        </div>
      </form>

    </div>
  {% endif %}
{% endblock %}
